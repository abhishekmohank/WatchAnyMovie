/*
 Copyright (c) 2017-2019 Cliqz GmbH. All rights reserved.

 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
*/
'use strict';(function(b,e){"object"===typeof exports&&"undefined"!==typeof module?e(exports):"function"===typeof define&&define.amd?define(["exports"],e):(b="undefined"!==typeof globalThis?globalThis:b||self,e(b.adblocker={}))})(this,function(b){function e(a){let c=[];for(let d of a)if("attributes"===d.type)c.push(d.target);else if("childList"===d.type)for(let g of d.addedNodes)c.push(g),a=g,void 0!==a.querySelectorAll&&c.push(...a.querySelectorAll("[id],[class],[href]"));return c}function h(a){let c=
new Set("br head link meta script style".split(" ")),d=new Set,g=new Set,b=new Set;for(let f of a)if(1===f.nodeType&&(void 0===f.localName||!c.has(f.localName))){(a=f.id)&&b.add(a);if(a=f.classList)for(let c of a)d.add(c);a=f.href;"string"===typeof a&&g.add(a)}return{classes:Array.from(d),hrefs:Array.from(g),ids:Array.from(b)}}function k(a){return`try{${a}}catch(c){}!function(){var c=document.currentScript,e=c&&c.parentNode;e&&e.removeChild(c)}();`}class l{constructor(a){this.cb=a;this.knownIds=new Set;
this.knownHrefs=new Set;this.knownClasses=new Set;this.observer=null}queryAll(a){this.handleNewNodes(Array.from(a.document.querySelectorAll("[id],[class],[href]")))}start(a){null===this.observer&&void 0!==a.MutationObserver&&(this.observer=new a.MutationObserver(a=>{this.handleNewNodes(e(a))}),this.observer.observe(a.document.documentElement,{attributeFilter:["class","id","href"],attributes:!0,childList:!0,subtree:!0}))}stop(){null!==this.observer&&(this.observer.disconnect(),this.observer=null)}handleNewFeatures({hrefs:a,
ids:c,classes:d}){let b=[],e=[],f=[];for(let a of c)!1===this.knownIds.has(a)&&(b.push(a),this.knownIds.add(a));for(let a of d)!1===this.knownClasses.has(a)&&(e.push(a),this.knownClasses.add(a));for(let c of a)!1===this.knownHrefs.has(c)&&(f.push(c),this.knownHrefs.add(c));return 0!==b.length||0!==e.length||0!==f.length?(this.cb({classes:e,hrefs:f,ids:b}),!0):!1}handleNewNodes(a){return this.handleNewFeatures(h(a))}}b.DOMMonitor=l;b.autoRemoveScript=k;b.extractFeaturesFromDOM=h;b.getDOMElementsFromMutations=
e;b.injectCSSRule=function(a,c){let b=c.head||c.getElementsByTagName("head")[0]||c.documentElement;if(null!==b){let d=c.createElement("style");d.type="text/css";d.id="cliqz-adblokcer-css-rules";d.appendChild(c.createTextNode(a));b.appendChild(d)}};b.injectScript=function(a,c){let b=c.createElement("script");b.type="text/javascript";b.id="cliqz-adblocker-script";b.async=!1;b.appendChild(c.createTextNode(k(a)));a=c.head||c.documentElement;null!==a&&a.appendChild(b)};Object.defineProperty(b,"__esModule",
{value:!0})})
//# sourceMappingURL=adblocker.umd.min.js.map
